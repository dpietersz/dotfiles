{
  // OpenCode Global Configuration
  // 
  // This file configures plugins, providers, and models for OpenCode.
  // Agents are defined in agent/*.md files (markdown with YAML frontmatter)
  // Commands are defined in command/*.md files (markdown with YAML frontmatter)
  //
  // Documentation: https://opencode.ai/docs/
  // Oh My OpenCode: https://github.com/code-yeongyu/oh-my-opencode

  "$schema": "https://opencode.ai/config.json",

  // Plugins for enhanced functionality
  // Note: OpenCode caches resolved versions. To update plugins, run:
  // rm -rf ~/.cache/opencode/node_modules ~/.cache/opencode/bun.lock
  "plugin": [
    "opencode-antigravity-auth",
    "opencode-openai-codex-auth",
    "@franlol/opencode-md-table-formatter"
  ],

  // Provider configuration
  "provider": {
    // Google/Gemini models via Antigravity OAuth
    // Authenticated via opencode-antigravity-auth plugin
    // Use: opencode run -m google/gemini-3-flash -p "your prompt"
    "google": {
      "models": {
        // Gemini 3 Pro - High thinking (best for complex reasoning, frontend, agentic coding)
        "gemini-3-pro-high": {
          "name": "Gemini 3 Pro High (Antigravity)",
          "limit": { "context": 1048576, "output": 65535 },
          "modalities": { "input": ["text", "image", "pdf"], "output": ["text"] }
        },
        // Gemini 3 Pro - Low thinking (faster, less reasoning)
        "gemini-3-pro-low": {
          "name": "Gemini 3 Pro Low (Antigravity)",
          "limit": { "context": 1048576, "output": 65535 },
          "modalities": { "input": ["text", "image", "pdf"], "output": ["text"] }
        },
        // Gemini 3 Flash - Fast model for quick tasks
        "gemini-3-flash": {
          "name": "Gemini 3 Flash (Antigravity)",
          "limit": { "context": 1048576, "output": 65536 },
          "modalities": { "input": ["text", "image", "pdf"], "output": ["text"] }
        },
        // Gemini 2.5 Pro - Stable reasoning model (fallback)
        "gemini-2.5-pro": {
          "name": "Gemini 2.5 Pro (Antigravity)",
          "limit": { "context": 1048576, "output": 65536 },
          "modalities": { "input": ["text", "image", "audio", "video", "pdf"], "output": ["text"] }
        },
        // Gemini 2.5 Flash - Stable fast model (fallback)
        "gemini-2.5-flash": {
          "name": "Gemini 2.5 Flash (Antigravity)",
          "limit": { "context": 1048576, "output": 65536 },
          "modalities": { "input": ["text", "image", "audio", "video", "pdf"], "output": ["text"] }
        }
      }
    },
    "openai": {
      // Default options for OpenAI models via ChatGPT Plus OAuth
      "options": {
        "reasoningEffort": "medium",
        "reasoningSummary": "auto",
        "textVerbosity": "medium",
        "include": ["reasoning.encrypted_content"],
        "store": false
      },
      // Most used models - trimmed from 22 to 8 for cleaner selection
      "models": {
        // GPT 5.2 - Latest model, best for complex reasoning (Oracle agent default)
        "gpt-5.2-medium": {
          "name": "GPT 5.2 Medium (OAuth)",
          "limit": { "context": 272000, "output": 128000 },
          "modalities": { "input": ["text", "image"], "output": ["text"] },
          "options": { "reasoningEffort": "medium", "reasoningSummary": "auto", "textVerbosity": "medium", "include": ["reasoning.encrypted_content"], "store": false }
        },
        "gpt-5.2-high": {
          "name": "GPT 5.2 High (OAuth)",
          "limit": { "context": 272000, "output": 128000 },
          "modalities": { "input": ["text", "image"], "output": ["text"] },
          "options": { "reasoningEffort": "high", "reasoningSummary": "detailed", "textVerbosity": "medium", "include": ["reasoning.encrypted_content"], "store": false }
        },
        // GPT 5.2 Codex - Optimized for coding tasks
        "gpt-5.2-codex-medium": {
          "name": "GPT 5.2 Codex Medium (OAuth)",
          "limit": { "context": 272000, "output": 128000 },
          "modalities": { "input": ["text", "image"], "output": ["text"] },
          "options": { "reasoningEffort": "medium", "reasoningSummary": "auto", "textVerbosity": "medium", "include": ["reasoning.encrypted_content"], "store": false }
        },
        "gpt-5.2-codex-high": {
          "name": "GPT 5.2 Codex High (OAuth)",
          "limit": { "context": 272000, "output": 128000 },
          "modalities": { "input": ["text", "image"], "output": ["text"] },
          "options": { "reasoningEffort": "high", "reasoningSummary": "detailed", "textVerbosity": "medium", "include": ["reasoning.encrypted_content"], "store": false }
        },
        // GPT 5.1 Codex Max - Large context, long-horizon builds
        "gpt-5.1-codex-max-high": {
          "name": "GPT 5.1 Codex Max High (OAuth)",
          "limit": { "context": 272000, "output": 128000 },
          "modalities": { "input": ["text", "image"], "output": ["text"] },
          "options": { "reasoningEffort": "high", "reasoningSummary": "detailed", "textVerbosity": "medium", "include": ["reasoning.encrypted_content"], "store": false }
        },
        // GPT 5.1 Codex - Standard coding model
        "gpt-5.1-codex-high": {
          "name": "GPT 5.1 Codex High (OAuth)",
          "limit": { "context": 272000, "output": 128000 },
          "modalities": { "input": ["text", "image"], "output": ["text"] },
          "options": { "reasoningEffort": "high", "reasoningSummary": "detailed", "textVerbosity": "medium", "include": ["reasoning.encrypted_content"], "store": false }
        },
        // GPT 5.1 - General purpose, fast responses
        "gpt-5.1-medium": {
          "name": "GPT 5.1 Medium (OAuth)",
          "limit": { "context": 272000, "output": 128000 },
          "modalities": { "input": ["text", "image"], "output": ["text"] },
          "options": { "reasoningEffort": "medium", "reasoningSummary": "auto", "textVerbosity": "medium", "include": ["reasoning.encrypted_content"], "store": false }
        },
        "gpt-5.1-high": {
          "name": "GPT 5.1 High (OAuth)",
          "limit": { "context": 272000, "output": 128000 },
          "modalities": { "input": ["text", "image"], "output": ["text"] },
          "options": { "reasoningEffort": "high", "reasoningSummary": "detailed", "textVerbosity": "high", "include": ["reasoning.encrypted_content"], "store": false }
        }
      }
    }
  },

  // MCP Servers for research and development tools
  // These provide external capabilities for the research and dev-research skills
  "mcp": {
    // Context7 - Official documentation lookup for libraries
    // Used by: librarian agent, research skill
    "context7": {
      "type": "remote",
      "url": "https://mcp.context7.com/mcp"
    },
    // grep.app - Fast GitHub code search across millions of repos
    // Used by: librarian agent, explore agent
    "grep_app": {
      "type": "remote",
      "url": "https://mcp.grep.app"
    },
    // BrightData - Advanced web scraping with CAPTCHA bypass (Layer 2 fallback)
    // Used by: research skill retrieve workflow when Crawl4AI fails
    // Free tier: 5,000 requests/month (search_engine, scrape_as_markdown)
    // Run locally via npx - requires API_TOKEN env var
    "brightdata": {
      "type": "local",
      "command": ["npx", "-y", "@brightdata/mcp"],
      "environment": {
        "API_TOKEN": "{env:BRIGHTDATA_API_TOKEN}"
      }
    },
    // Brave Search MCP - Web search using Brave Search API
    // Used by: research skill, explore agent
    // Wrapper script loads API key from password store automatically
    "brave": {
      "type": "local",
      "command": ["{{ .chezmoi.homeDir }}/.local/bin/scripts/brave-mcp-wrapper.sh"]
    },
    // Perplexity Search MCP - Real-time web search and reasoning using Perplexity API
    // Used by: perplexity-researcher agent, research skill
    // Wrapper script loads API key from password store automatically
    "perplexity": {
      "type": "local",
      "command": ["{{ .chezmoi.homeDir }}/.local/bin/scripts/perplexity-mcp-wrapper.sh"]
    },
    // Playwright MCP - Browser automation via Playwright running in distrobox
    // Used by: web automation, testing, browser interaction tasks
    // Requires: playwright distrobox (distrobox enter playwright)
    // Service: Managed by systemd (playwright-mcp.service)
    // Endpoint: http://localhost:8931/mcp (started automatically via chezmoi)
    "playwright": {
      "type": "remote",
      "url": "http://localhost:8931/mcp"
    }
  }

  // Agents are loaded from agent/*.md files (markdown with YAML frontmatter)
  // Commands are loaded from command/*.md files (markdown with YAML frontmatter)
  // Skills are loaded from skill/*/SKILL.md files
  // No need to define them here - the markdown files are the authoritative source
}
