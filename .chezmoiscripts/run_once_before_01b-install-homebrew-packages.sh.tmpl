#!/bin/bash
set -euo pipefail

{{- if not .isMacOS }}
exit 0
{{- end }}

# Install Homebrew packages on macOS
if ! command -v brew >/dev/null; then
  echo "Homebrew not installed. Skipping package installation."
  exit 1
fi

echo "ðŸ“¦ Installing Homebrew packages..."

# Add taps first
echo "Adding Homebrew taps..."
brew tap nikitabobko/tap
brew tap amar1729/formulae

# Core tools (formulas - required for decryption and other early steps)
echo "Installing core tools (formulas)..."
brew install age gnupg mise pass pinentry-mac

# Development tools (formulas)
echo "Installing development tools (formulas)..."
brew install ghostty kitty zed vscodium browserpass espanso

# Applications (casks)
echo "Installing applications (casks)..."
brew install --cask \
  nikitabobko/tap/aerospace \
  raycast \
  cleanmymac \
  arq \
  zen \
  bruno \
  polypane

echo "âœ… Homebrew packages installed successfully"
