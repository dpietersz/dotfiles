#!/bin/bash
{{- if not .remote }}

# Check if already installed
if command -v beekeeper-studio >/dev/null; then
  echo "Beekeeper Studio already installed"
  exit 0
fi

{{- if eq .chezmoi.os "darwin" }}
if command -v brew >/dev/null; then
  brew install --cask beekeeper-studio
else
  echo "Homebrew not installed. Visit: https://www.beekeeperstudio.io"
fi

{{- else if eq .chezmoi.osRelease.id "bluefin" }}
if command -v flatpak >/dev/null; then
  flatpak install -y flathub io.beekeeperstudio.Studio
else
  echo "Flatpak not installed."
fi

{{- else if or (eq .chezmoi.osRelease.id "fedora") (eq .chezmoi.osRelease.idLike "fedora") }}
if command -v dnf >/dev/null; then
  sudo curl -o /etc/yum.repos.d/beekeeper-studio.repo https://rpm.beekeeperstudio.io/beekeeper-studio.repo
  sudo rpm --import https://rpm.beekeeperstudio.io/beekeeper.key
  sudo dnf install -y beekeeper-studio
fi

{{- else }}
echo "No installation instructions for this distribution."
echo "Visit: https://www.beekeeperstudio.io"

{{- end }}
{{- end }}
